如何处理对形似 /a/b/<c>/<d>/e url的注册？

其中c,d将做为回调函数的参数使用。



Index结构：

按以下 `route` 进行 `register` ：

1. '/n1' : obj2
2. '/n2' : obj3
3. '/n1/m1' : obj4
4. '/n2/m2' : obj5
5. '/n2/m3' : obj6

Layer depth 

​	0			'ROOT' - ( -- )

​				/              \

​	1		'n1' - (obj2)   'n2' - (obj3)  

​			/			    /		\

​	2	'm1' - (obj4)    'm2' - (obj5)   'm3' - (obj6)

注册 ‘/a/<b>/c' 需要匹配到 '/a/(anything)/c'

1. 第一层可正常搜索 pointer = pointer['a']

2. 第二层搜索

   1. **需要考虑注册冲突问题：**

      需要在检测到重复可能性时注册失败

      1.  参数结点在父路径相同时为同层唯一结点

          /a/b & /a/<p> 不可同时出现

      2.  每层的参数结点只能指向一个回调函数

         /a/<p1> & /a/<p1>/<p2> 可同时注册

      3. ​

   2. 注册形式：

      1. 在封装着callback的外层函数中，将<param>从路径中替换为 '$'，这个字符不可能出现在url中

      2. 寻路

         ```python
         callback = url_index.find(route)

         ```

         因为已考虑到路径不重复的问题

         所以在下层直接寻路失败时，将寻找子结点 '*' 

         记录*结点的值，作为参数按照**{'url_params':['v1','v2']} 结构传入（具体操作参见源代码）

         如找不到，则自动跳转到注册的 /404 页面（没有注册则为默认404）

      ​